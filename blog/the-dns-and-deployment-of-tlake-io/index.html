<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>the dns and deployment of tlake.io | tlake.io</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Porkbun is my new favorite domain registrar and had the best deals on .io domains that I could find, but I wanted to use DNSimple to manage my DNS settings. DNSimple offers a robust API and a Terraform provider, which is very appealing to my infrastructure-as-code aspirations. Luckily, it&rsquo;s pretty easy to get the best of both worlds:
Through Porkbun, replace the domain&rsquo;s default nameservers with DNSimple&rsquo;s nameservers.
Import the domain through DNSimple and bam!"><meta name=generator content="Hugo 0.126.1"><meta name=robots content="index, follow"><link rel=stylesheet href=/ananke/css/main.min.2438bcafd7af9675c426d1a4afcd16cfff18e4e10f401071e45b5ccd3be40a0d.css><link rel=canonical href=https://tlake.io/blog/the-dns-and-deployment-of-tlake-io/><meta property="og:url" content="https://tlake.io/blog/the-dns-and-deployment-of-tlake-io/"><meta property="og:site_name" content="tlake.io"><meta property="og:title" content="the dns and deployment of tlake.io"><meta property="og:description" content="Porkbun is my new favorite domain registrar and had the best deals on .io domains that I could find, but I wanted to use DNSimple to manage my DNS settings. DNSimple offers a robust API and a Terraform provider, which is very appealing to my infrastructure-as-code aspirations. Luckily, it’s pretty easy to get the best of both worlds:
Through Porkbun, replace the domain’s default nameservers with DNSimple’s nameservers.
Import the domain through DNSimple and bam!"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-04-18T09:19:09-07:00"><meta property="article:modified_time" content="2019-04-18T09:19:09-07:00"><meta property="article:tag" content="Dns"><meta property="article:tag" content="Github"><meta property="article:tag" content="Github Pages"><meta itemprop=name content="the dns and deployment of tlake.io"><meta itemprop=description content="Porkbun is my new favorite domain registrar and had the best deals on .io domains that I could find, but I wanted to use DNSimple to manage my DNS settings. DNSimple offers a robust API and a Terraform provider, which is very appealing to my infrastructure-as-code aspirations. Luckily, it’s pretty easy to get the best of both worlds:
Through Porkbun, replace the domain’s default nameservers with DNSimple’s nameservers.
Import the domain through DNSimple and bam!"><meta itemprop=datePublished content="2019-04-18T09:19:09-07:00"><meta itemprop=dateModified content="2019-04-18T09:19:09-07:00"><meta itemprop=wordCount content="441"><meta itemprop=keywords content="Dns,Github,Github Pages"><meta name=twitter:card content="summary"><meta name=twitter:title content="the dns and deployment of tlake.io"><meta name=twitter:description content="Porkbun is my new favorite domain registrar and had the best deals on .io domains that I could find, but I wanted to use DNSimple to manage my DNS settings. DNSimple offers a robust API and a Terraform provider, which is very appealing to my infrastructure-as-code aspirations. Luckily, it’s pretty easy to get the best of both worlds:
Through Porkbun, replace the domain’s default nameservers with DNSimple’s nameservers.
Import the domain through DNSimple and bam!"></head><body class="ma0 avenir bg-near-white production"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">tlake.io</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Blog</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">the dns and deployment of tlake.io</h1><time class="f6 mv4 dib tracked" datetime=2019-04-18T09:19:09-07:00>April 18, 2019</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><img src=/images/parked-on-the-bun.png alt="parked on the bun"></p><p><a href=https://porkbun.com>Porkbun</a> is my new favorite domain registrar and had the best deals on .io domains that I could find, but I wanted to use <a href=https://dnsimple.com>DNSimple</a> to manage my DNS settings.
DNSimple offers a robust API and a <a href=https://www.terraform.io/docs/providers/>Terraform provider</a>, which is very appealing to my infrastructure-as-code aspirations.
Luckily, it&rsquo;s pretty easy to get the best of both worlds:</p><ul><li><p>Through Porkbun, replace the domain&rsquo;s default nameservers with DNSimple&rsquo;s nameservers.</p></li><li><p>Import the domain through DNSimple and <em>bam!</em> now you can use their rad API to manage the domain, which you purchased somewhere else.</p></li></ul><p>(Full disclosure: use of DNSimple&rsquo;s services <em>does</em> require a subscription fee.)</p><p>Now, this is just a static site generated through <a href=https://gohugo.io/>Hugo</a> and made pretty by the <a href=https://themes.gohugo.io/gohugo-theme-ananke/>Ananke</a> theme.
It&rsquo;s deployed to a <code>docs/</code> directory on the <a href=https://github.com/tlake/static-site>project repository</a>&rsquo;s <code>master</code> branch, and uses the custom domain <code>tlake.io</code> instead of GitHub&rsquo;s default <code>tlake.github.io</code>.
It took a bit of doing to make GitHub happy, and this is the point of this post.</p><p>GitHub&rsquo;s got good documentation around <a href=https://help.github.com/en/articles/using-a-custom-domain-with-github-pages>using a custom domain</a> with GitHub Pages.
In my case, I was looking to set up an apex domain (<code>tlake.io</code>, instead of something like <code>www.tlake.io</code>) as noted <a href=https://help.github.com/en/articles/setting-up-an-apex-domain>here</a>.
DNSimple does indeed allow me to configure <code>ALIAS</code> records, so I did.</p><p><img src=/images/dnsimple-alias-record.png alt="DNSimple records: ALIAS tlake.io -> tlake.github.io"></p><p>I built and deployed the site, updated the custom domain to <code>tlake.io</code> in the repo&rsquo;s settings, and gave the record some time to propagate.
Navigating to <code>tlake.io</code> displayed the homepage!
It was working!</p><p>Then I looked in the repo&rsquo;s settings again.</p><p><img src=/images/github-dns-error.png alt="GitHub error message: Domain&rsquo;s DNS record could not be retrieved."></p><p>But&mldr; but the site was working.
I could navigate to it.
Other people could navigate to it.
What was GitHub&rsquo;s problem with it?</p><p>I did some **<code>dig</code>**ging (FUNNY JOKE) to see if <code>tlake.io</code> and <code>tlake.github.io</code> were resolving in the same way.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>for</span> d in tlake.io tlake.github.io ; <span style=color:#66d9ef>do</span> dig $d +noall +answer ; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; tlake.io +noall +answer
</span></span><span style=display:flex><span>;; global options: +cmd
</span></span><span style=display:flex><span>tlake.io.               <span style=color:#ae81ff>2829</span>    IN      A       185.199.110.153
</span></span><span style=display:flex><span>tlake.io.               <span style=color:#ae81ff>2829</span>    IN      A       185.199.111.153
</span></span><span style=display:flex><span>tlake.io.               <span style=color:#ae81ff>2829</span>    IN      A       185.199.109.153
</span></span><span style=display:flex><span>tlake.io.               <span style=color:#ae81ff>2829</span>    IN      A       185.199.108.153
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; tlake.github.io +noall +answer
</span></span><span style=display:flex><span>;; global options: +cmd
</span></span><span style=display:flex><span>tlake.github.io.        <span style=color:#ae81ff>2976</span>    IN      A       185.199.109.153
</span></span><span style=display:flex><span>tlake.github.io.        <span style=color:#ae81ff>2976</span>    IN      A       185.199.108.153
</span></span><span style=display:flex><span>tlake.github.io.        <span style=color:#ae81ff>2976</span>    IN      A       185.199.111.153
</span></span><span style=display:flex><span>tlake.github.io.        <span style=color:#ae81ff>2976</span>    IN      A       185.199.110.153
</span></span></code></pre></div><p>They were.</p><p>So what gives?</p><p>Well, after a couple hours of experimenting with DNS settings, I discovered a configuration that seemed to satisfy GitHub: adding a <code>CNAME</code> record that pointed <code>www.tlake.io</code> to <code>tlake.io</code>.
This combined with the previous <code>ALIAS</code> record convinced GitHub to stop complaining.</p><p><img src=/images/dnsimple-alias-cname-records.png alt="DNSimple records: ALIAS tlake.io -> tlake.github.io, CNAME www.tlake.io -> tlake.io"></p><p><img src=/images/github-happy-status.png alt="GitHub happy status"></p><p>And that&rsquo;s about it!
It&rsquo;s not particularly difficult, but it&rsquo;s a tiny thing that was overlooked in the documentation, and my Google Fu didn&rsquo;t turn up the answer, so here we are.</p><ul class=pa0><li class="list di"><a href=/tags/dns/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Dns</a></li><li class="list di"><a href=/tags/github/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Github</a></li><li class="list di"><a href=/tags/github-pages/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Github Pages</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://tlake.io/>&copy; Tanner Lake 2024</a><div><div class=ananke-socials></div></div></div></footer></body></html>