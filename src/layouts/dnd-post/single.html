{{ define "header" }}
{{/* We can override any block in the baseof file be defining it in the template */}}
{{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}

{{- if eq (getenv "HUGO_ENV") "debug" | or (eq .Site.Params.env "debug") }}
<ul>
  <li>layout: dnd-post/single.html</li>
</ul>
{{- end }}

<article class="cf pa3 pa4-m pa4-l">
  <!-- <header class="mt4 w-100"> -->
  <header class="measure-wide-l center f4 lh-copy">

    <aside class="instapaper_ignoref b helvetica tracked">
      {{/*
      CurrentSection allows us to use the section title instead of inferring from the folder.
      https://gohugo.io/variables/page/#section-variables-and-methods
      */}}
      {{with .CurrentSection.Title }}{{. | upper }}{{end}}
    </aside>

    {{ partial "social-share.html" . }}

    {{- partial "date-and-reading-time.html" . -}}

    <div class="measure-wide-l center f4 nested-copy-line-height lh-copy">
      {{- partial "next-prev-single.html" . -}}
    </div>

    <h1 class="f1 athelas mt3 mb1">
      {{- .Title -}}
    </h1>

    {{ if .Description }}
    <p>{{ .Description }}</p>
    {{ end }}

    {{ with .Params.author }}
    <p class="tracked">
      By <strong>
        {{ if reflect.IsSlice . }}
        {{ delimit . ", " | markdownify }}
        {{else}}
        {{ . | markdownify }}
        {{ end }}
      </strong>
    </p>
    {{ end }}

  </header>

  <div class="measure-wide-l center f4 nested-copy-line-height lh-copy nested-links {{ $.Param " post_content_classes" |
    default "serif" }} f4 nested-links nested-img {{ $.Param "primary_font_color_class" | default "mid-gray" }} pr4-l">
    {{- .Content -}}
    {{- partial "tags.html" . -}}
  </div>


  <div class="measure-wide-l center f4 nested-copy-line-height lh-copy">
    {{- partial "next-prev-single.html" . -}}
  </div>

  <div class="measure-wide-l mt5-l center f4">
    {{- partial "dnd-related.html" . -}}
  </div>

  <div class="measure-wide-l center f4 nested-copy-line-height lh-copy">
    <div class="mt6 instapaper_ignoref">
      {{ if .Site.DisqusShortname }}
      {{ template "_internal/disqus.html" . }}
      {{ end }}
      {{ if .Site.Params.commentoEnable }}
      {{- partial "commento.html" . -}}
      {{ end }}
    </div>
  </div>

</article>
{{ end }}
