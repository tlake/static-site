{{ define "main" }}

{{- if eq (getenv "HUGO_ENV") "debug" | or (eq .Site.Params.env "debug") }}
<ul>
  <li>layout: dnd-npc/list.html</li>
</ul>
{{- end }}

<article class="pa3 pa4-ns nested-copy-line-height nested-img">
  <section
    class='cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy {{ $.Param "primary_font_color_class" | default "mid-gray" }} nested-links'>
    {{- .Content -}}
  </section>
  <section class="flex-ns flex-wrap justify-around mt5">
    {{- $sortedpages := .Pages.ByParam "title" }}
    {{ $paginator := .Paginate (where $sortedpages "File.Dir" "!=" "dnd/hidden/") 12 }}
    {{ range $paginator.Pages }}
    <div class='relative w-100 w-30-l mb4 {{ $.Param "secondary_bg_color_class" | default "bg-white" }}'>
      {{- partial "npc-summary.html" . -}}
    </div>
    {{ end }}
  </section>
  {{- template "_internal/pagination.html" . -}}
</article>
{{ end }}
